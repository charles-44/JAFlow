# Configuration de base de données
server:
  port: ${jaflow.workflow.url.port}
  url: http://localhost:8000${jaflow.workflow.url.context.path}
  servlet:
    context-path: ${jaflow.workflow.url.context.path}


logging:
  file:
    path: /var/log/${jaflow.workflow.application.name}/
    name: jaflow-${jaflow.workflow.application.name}.log
  level:
    root: INFO
    org.springframework.web: DEBUG
    org.springframework.boot.autoconfigure.web: DEBUG
    org.apache.catalina: DEBUG
    org.apache.coyote: DEBUG
    org.apache.tomcat: DEBUG
    org.springframework.security: DEBUG


spring:
  config:
    import: "classpath:jaflow.properties"
  application:
    name: ${jaflow.workflow.application.name}
  security:
    oauth2:
      client:
        registration:
          keycloak:
            client-id: ${jaflow.keycloak.client-id}
            client-secret: ${jaflow.keycloak.client-secret}
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            scope: openid, profile, email
        provider:
          keycloak:
            issuer-uri: ${jaflow.keycloak.url.protocol}://${jaflow.keycloak.url.host}:${jaflow.keycloak.url.port}/${jaflow.keycloak.url.directory}/realms/${jaflow.keycloak.realm}
      resourceserver:
        jwt:
          issuer-uri: ${jaflow.keycloak.url.protocol}://${jaflow.keycloak.url.host}:${jaflow.keycloak.url.port}/${jaflow.keycloak.url.directory}/realms/${jaflow.keycloak.realm}

  datasource:
    url: jdbc:postgresql://${jaflow.postgres.url.host}:${jaflow.postgres.url.port}/${jaflow.postgres.url.database.workflow.name}
    username: ${jaflow.postgres.url.database.workflow.username}
    password: ${jaflow.postgres.url.database.workflow.password}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
      database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true

#springdoc:
#  swagger-ui:
#    url: "./v3/api-docs"
#    config-url: "./../v3/api-docs/swagger-config"

# Used by Swagger
info:
  title: "JAFlow Workflow API"
  description: "Cette API permet de gérer les workflows avec intégration Keycloak"
  version: "1.0.0"
  contact:
    name: "Bruce Wayne"
    email: "bruce.wayne@example.com"
    url: "https://ton-site.fr"